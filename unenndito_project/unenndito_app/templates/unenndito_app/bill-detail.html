{% extends 'base.html' %}
{% block title %} Track Bill | Trackgov Dashboard Bill Detail {% endblock title %}
{% load static %}

{% comment %} Changes/Modifications {% endcomment %}
{% load comments %}
{% load comments_xtd %}

{% block content %}
    <!-- Begin page -->
    <div class="wrapper">
        <!-- ========== Left Sidebar Start ========== -->
        <div class="left-side-menu">

            <div class="h-100" id="left-side-menu-container" data-simplebar>

                <!--- Sidemenu -->
                <ul class="metismenu side-nav">

                    <li class="side-nav-title side-nav-item">Navigation</li>

                    <li class="side-nav-item">
                        <a href="javascript: void(0);" class="side-nav-link">
                            <i class="uil-desktop"></i>
                            <span class="badge badge-success float-right">4</span>
                            <span> Dashboards </span>
                        </a>
                        {% comment %} <ul class="side-nav-second-level" aria-expanded="false">
                            <li>
                                <a href="dashboard-analytics.html">Analytics</a>
                            </li>
                            <li>
                                <a href="dashboard-crm.html">CRM</a>
                            </li>
                            <li>
                                <a href="index.html">Ecommerce</a>
                            </li>
                            <li>
                                <a href="dashboard-projects.html">Projects</a>
                            </li>
                        </ul> {% endcomment %}
                    </li>

                    {% comment %} <li class="side-nav-title side-nav-item">Apps</li>

                    <li class="side-nav-item">
                        <a href="apps-calendar.html" class="side-nav-link">
                            <i class="uil-calender"></i>
                            <span> Categories </span>
                        </a>
                    </li>

                    <li class="side-nav-item">
                        <a href="apps-chat.html" class="side-nav-link">
                            <i class="uil-comments-alt"></i>
                            <span> Bills </span>
                        </a>
                    </li> {% endcomment %}

        
                </ul>

                
                <!-- End Sidebar -->

                <div class="clearfix"></div>

            </div>
            <!-- Sidebar -left -->

        </div>
        <!-- Left Sidebar End -->


        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page content-page-custom">
            <div class="content">

                <!-- Start Content-->
                <div class="container-fluid">
                    
                    <!-- start page title -->
                    <div class="row mt-lg-0 mt-md-5 mt-sm-3">
                        <div class="col-lg-12 col-md-8 col-sm-4 mt-xl-5">
                            <div class="page-title-box">
                                <h4 class="page-title">{{ bill.title_of_bill }}</h4>
                            </div>
                        </div>
                    </div>     
                    <!-- end page title --> 

                    <div class="row justify-content-center">
                        <div class="col-lg-7 col-md-10 col-sm-11">
    
                            <div class="horizontal-steps mt-4 mb-4 pb-5">
                                {% if bill.stage_of_bill == 'Introduced and read a first time' and bill.current_house == 'House of Representatives' and bill.originating_house != bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 50%;"></div>

                                {% elif bill.stage_of_bill == 'Introduced and read a first time' and bill.current_house == 'House of Representatives' and bill.originating_house == bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 0%;"></div>

                                {% elif bill.stage_of_bill == 'Second reading moved' or bill.stage_of_bill == 'Second reading debate' and bill.current_house == 'House of Representatives' and bill.originating_house != bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 58.3%;"></div>

                                {% elif bill.stage_of_bill == 'Second reading moved' or bill.stage_of_bill == 'Second reading debate' and bill.current_house == 'House of Representatives' and bill.originating_house == bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 8.3%;"></div>

                                {% elif bill.stage_of_bill == 'Third reading moved' or bill.stage_of_bill == 'Third reading agreed to' and bill.current_house == 'House of Representatives' and bill.originating_house != bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 66.6%;"></div>

                                {% elif bill.stage_of_bill == 'Third reading moved' or bill.stage_of_bill == 'Third reading agreed to' and bill.current_house == 'House of Representatives' and bill.originating_house == bill.current_house %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 16.6%;"></div>

                                {% else %}
                                    <div class="horizontal-steps-content">
                                        <div class="step-item current">
                                            <span>Intro Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed Senate</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Intro House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Passed House</span>
                                        </div>
                                        <div class="step-item">
                                            <span>Assent</span>
                                        </div>
                                    </div>
                                    <div class="process-line" style="width: 100%;"></div>
                                {% endif %}
    
                            </div>
                        </div>
                    </div>
                    <!-- end row -->    

                    <!-- Switch-->
                    <div class="row justify-content-center">
                            <div class="mt-1 mb-3">
                                Track
                            </div>

                            <div class="mt-1 mb-3 ml-1">
                                {% if bill.id in tracked_bills_id %}
                                    <input class="switch-input-custom" type="checkbox" id="switch{{ bill.id }}" data-switch="success" checked />
                                    <label class="track-untrack-custom" for="switch{{ bill.id }}" data-on-label="Yes" data-off-label="No" class="mb-0 d-block"></label>
                                {% else %}
                                    <input class="switch-input-custom" type="checkbox" id="switch{{ bill.id }}" data-switch="success"/>
                                    <label class="track-untrack-custom" for="switch{{ bill.id }}" data-on-label="Yes" data-off-label="No" class="mb-0 d-block"></label>
                                {% endif %}
                            </div>

                            <div class="mt-0 mb-3 ml-5">
                                <a href="{{ bill.link_to_bill }}" >
                                    <button class="btn btn-rounded btn-info font-10">READ</button>
                                </a>
                            </div>
                    </div> 
                    
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="header-title mb-3">LAST UPDATE</h4>
        
                                    <div class="table-responsive">
                                        <table class="table mb-0">
                                            <thead class="thead-light">
                                            <tr>
                                                <th>{{ bill.current_house }}</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>{{ bill.stage_of_bill }}</td>
                                                <td>{{ bill.date }}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- end table-responsive -->
        
                                </div>
                            </div>
                        </div> <!-- end col -->
    

                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="header-title mb-3">Bill Information</h4>
    
                                    <div>
                                        <dl class="">
                                            <dt>Date</dt>
                                            <dd>
                                                {{ bill.date }} &nbsp;
                                            </dd>
                                            <dt>Chamber</dt>
                                            <dd>
                                                {{ bill.originating_house }} &nbsp;
                                            </dd>
                                            <dt>Status</dt>
                                            <dd>
                                                {{ bill.status }} &nbsp;
                                            </dd>
                                            <dt>
                                                Sponsor
                                            </dt>
                                            <dd>
                                                {{ bill.sponsor }} &nbsp;
                                            </dd>

                                            <dt>Summary</dt>
                                            <dd>
                                               {{ bill.summary }} &nbsp;
                                            </dd>
                                        </dl>

                                    </div>


                                </div>
                            </div>
                        </div> <!-- end col -->


                        <div class="col-lg-3">
                                <div class="card">
                                    <div class="card-body">

                                        <div class="card text-center">
                                            <div class="card-body">
                                                {% comment %} <img src="{{ bio_object.profile_picture }}" class="rounded-circle avatar-lg img-thumbnail h-xl-25 w-xl-25 h-lg-50 w-lg-50 h-md-50 w-md-50 h-sm-50 w-sm-50" alt="profile-image"> {% endcomment %}
                                                <img src="{{ bio_object.profile_picture }}" class="rounded-circle avatar-lg img-thumbnail h-50 w-50" alt="profile-image">

                                                <span class="bills-list-title-custom">
                                                    <a id="" href="{% url 'politicianbio' bio_object.name %}">
                                                        <h4 class="mb-0 mt-2">{{ bio_object.name }}</h4>
                                                    </a>
                                                </span>

                                                <p class="text-muted font-14">Electorate</p>
                                                {% if rep_vote == 'None' %}
                                                    <div class="text-left mt-3 ml-3">
                                                        <p class="text-muted mb-2 font-13"><strong> Did not vote, or paired. </strong>
                                                    </div>
                                                {% else %}
                                                    {% if rep_vote.ayes_vote == 'Ayes' %}
                                                        <div class="text-left mt-3">
                                                            <p class="text-muted mb-2 font-13"><strong> {{ rep_vote.question }} :</strong> <span class="ml-2">Agreed</span></p>
                                                        </div>
                                                    {% else %}
                                                        <div class="text-left mt-3">
                                                            <p class="text-muted mb-2 font-13"><strong> {{ rep_vote.question }} :</strong> <span class="ml-2">Disagreed</span></p>
                                                        </div>
                                                    {% endif %}
                                                {% endif %}

                                                <ul class="social-list list-inline mt-3 mb-0">
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.wiki }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-white text-white">
                                                            <i class="mdi mdi-wikipedia"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.website }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-primary text-primary">
                                                            <i class="mdi mdi-web"></i>
                                                        </a>
                                                    </li>
                                                    {% comment %} <li class="list-inline-item text-center mr-2">
                                                        <span class="text-white-50 ml-1">
                                                            <i>contact:</i>
                                                        </span>
                                                    </li> {% endcomment %}
                                                    <li class="list-inline-item text-center">
                                                        <a href="javascript: copyText('{{ bio_object.mail_address }}');" class="social-list-item showHideToolTip">
                                                            <i class="mdi mdi-mailbox"></i>
                                                        </a>
                                                    </li>

                                                    <li class="list-inline-item text-center">
                                                        <a href="javascript: copyText('{{ bio_object.phone_number }}');" class="social-list-item border-success text-success showHideToolTip">
                                                            <i class="mdi mdi-phone"></i>
                                                        </a>
                                                    </li>

                                                    <li class="list-inline-item text-center">
                                                        <a href="javascript: copyText('{{ bio_object.email_address }}');" class="social-list-item border-warning text-warning showHideToolTip">
                                                            <i class="mdi mdi-email-edit"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.twitter }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-info text-info">
                                                            <i class="mdi mdi-twitter"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.facebook }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-primary text-primary">
                                                            <i class="mdi mdi-facebook"></i>
                                                        </a>
                                                    </li>
                                                    {% comment %} <li class="list-inline-item text-center">
                                                        <a href="javascript: copyText('Hello There');" class="social-list-item border-primary text-primary showHideToolTip">
                                                            <i class="mdi mdi-facebook-messenger"></i>
                                                        </a>
                                                    </li> {% endcomment %}
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.instagram }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-danger text-danger">
                                                            <i class="mdi mdi-instagram"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.linkedin }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-primary text-primary">
                                                            <i class="mdi mdi-linkedin"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item text-center">
                                                        <a href="{{ bio_object.youtube }}" target="_blank" rel="noopener noreferrer" class="social-list-item border-danger text-danger">
                                                            <i class="mdi mdi-youtube"></i>
                                                        </a>
                                                    </li>
                                                </ul>

                                                <br />

                                                <span class="tooltiptext" id="myTooltip">Copy to clipboard</span>

                                                <span class="tooltiptext" id="copiedTooltip">Copied!!!</span>
                                            </div> <!-- end card-body -->
                                        </div> <!-- end card -->
                                    </div>
                                </div>
                        </div>

                        <div class="col-lg-3">
                            <div class="row">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="header-title mb-3">PROPOSED AMENDMENTS</h4>

                                        <div class="table-responsive">
                                            <table class="table mb-0">
                                                <thead class="thead-light">
                                                <tr>
                                                    <!-- <th></th> -->
                                                    <!-- <th></th> -->
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% if bill.proposed_ammendments == 'No proposed amendments have been circulated.' %}
                                                    <tr>
                                                        <td>{{ bill.proposed_ammendments }}</td>
                                                        <td></td>
                                                    </tr>
                                                {% else %}
                                                    <tr>
                                                        <td>Government [sheet RW122]</td>
                                                        <td>
                                                            <a
                                                                id="main_0_content_0_lvResults_hlBill_0"
                                                                aria-label="Bill link - ABC Amendment (Online and Multichannelling Services) Bill 2001 [2002]"
                                                                rel="noopener noreferrer"
                                                                href=""
                                                                target=""
                                                                >
                                                                <button class="btn btn-rounded btn-info font-11">READ</button>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>KING, Catherine, MP</td>
                                                        <td>
                                                            <a
                                                                id="main_0_content_0_lvResults_hlBill_0"
                                                                aria-label="Bill link - ABC Amendment (Online and Multichannelling Services) Bill 2001 [2002]"
                                                                rel="noopener noreferrer"
                                                                href=""
                                                                target=""
                                                                >
                                                                <button class="btn btn-rounded btn-info font-11">READ</button>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                {% endif %}

                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- end table-responsive -->
                                    </div>
                                </div>
                            </div> <!-- end row -->
                        </div> <!-- end col -->


                    </div>
                    <!-- end row -->
    
    
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="header-title mb-3">COMMENTS</h4>
        
                                    <div class="table-responsive">
                                        {% comment %} Placeholder {% endcomment %}

                                        {% comment %} Changes/Modifications {% endcomment %}
                                        {% get_comment_count for bill as comment_count %}
                                        <div class="py-4 text-center">
                                            {% comment %} <a href="{% url 'blog:post-list' %}">Back to the post list</a> {% endcomment %}
                                            &nbsp;&sdot;&nbsp;
                                            {{ comment_count }} comment{{ comment_count|pluralize }}
                                            ha{{ comment_count|pluralize:"s,ve" }} been posted.
                                        </div>
                                        {% comment %} Displaying the comments form {% endcomment %}
                                        <div class="card card-block mb-5">
                                            <div class="card-body">
                                                <h4 class="card-title text-center pb-3">Post your comment</h4>
                                                {% render_comment_form for bill %}
                                            </div>
                                        </div>

                                        {% if comment_count %}
                                            <ul class="media-list">
                                            {% render_xtdcomment_tree for bill allow_flagging allow_feedback show_feedback %}
                                            </ul>
                                        {% endif %}


                                    </div>
                                    <!-- end table-responsive -->
        
                                </div>
                            </div>
                        </div> <!-- end col -->

                    </div>
                    <!-- end row -->
                            
                </div> <!-- container -->

            </div> <!-- content -->


        </div>

        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->


    </div>
    <!-- END wrapper -->

    <script type="text/javascript" src="{% static 'trackgovApp/js/contact-buttons.js' %}"></script>

    <script type="text/javascript" src="{% static 'trackgovApp/js/track-untrack-detail.js' %}"></script>


{% endblock content %}
